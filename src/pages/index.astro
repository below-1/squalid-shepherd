---
import BeritaItem from "../components/BeritaItem.astro";
import Carousel from "../components/carousel/Carousel.astro";
import ListingSnapshot from "../components/ListingSnapshot.astro";
import Map from "../components/Map.astro";
import PengumumanItem from "../components/PengumumanItem.astro";
import YoutubeVideo from "../components/YoutubeVideo.astro";
import Layout from "../layouts/Layout.astro";
import { getLatestBeritaItems } from "../services/berita";
import { getLatestPengumumanItems } from "../services/pengumuman";

const carouselItems = [
	{
		url: "/foobar",
		active: false,
		title: "Aristop Solle",
		subtitle: "Istri Terbaik Sedunia, DW no 1",
		image: "/images/carousel-1.png",
	},
	{ imageUrl: "/images/carousel-1.jpg", active: false, description: "asa" },
	{ imageUrl: "/images/carousel-2.jpg", active: false, description: "asa" },
	{ imageUrl: "/images/carousel-3.jpg", active: false, description: "asa" },
];

const pengumuman = await getLatestPengumumanItems();
const berita = await getLatestBeritaItems()

// type Props = {
// 	items: CarouselItem[];
// }

// const { items } = Astro.props;
// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
	<div>
		<Carousel
			items={carouselItems}
			time={10 * 1000}
			class="h-[calc(100vh-theme(space.24))]"
		/>
	</div>
	<div class="dark">
		<YoutubeVideo />
	</div>
	<div class="dark">
		<ListingSnapshot
			iconName="announcement"
			title="Pengumuman"
			totalItems={pengumuman.total}
			listingRef="/pengumuman"
			class="bg-neutral-100 dark:bg-primary-600"
		>
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
				{
					pengumuman.items.map((item) => (
						<PengumumanItem
							date={item.date}
							id={item.id.toString()}
							title={item.title}
							creator={item.creator}
						/>
					))
				}
			</div>
			<div class="flex items-center justify-center">
				<a
					href="/pengumuman"
					class="px-6 py-2 bg-transparent border border-neutral-300 text-lg font-bold hover:shadow-lg dark:text-white"
					>Lihat Selengkapnya</a
				>
			</div>
		</ListingSnapshot>
	</div>

	<div class="">
		<ListingSnapshot
			iconName="news"
			title="Berita"
			totalItems={pengumuman.total}
			listingRef="/berita"
			class="bg-neutral-100 dark:bg-primary-600"
		>
			<div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
				{berita.items.map(item => (
					<BeritaItem
						date={item.date}
						id={item.id.toString()}
						title={item.title}
						creator={item.creator}
						image={item.image}
					/>
				))}
			</div>
			<div class="flex items-center justify-center">
				<a
					href="/berita"
					class="px-6 py-2 bg-transparent border border-neutral-300 text-lg font-bold hover:shadow-lg dark:text-white"
					>Lihat Selengkapnya</a
				>
			</div>
		</ListingSnapshot>
	</div>

	<div class="h-[600px]"></div>

	<Map />
</Layout>
